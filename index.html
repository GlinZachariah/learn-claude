<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Dashboard - Study Notes & Materials</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f97316;
            --bg-light: #f9fafb;
            --bg-white: #ffffff;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --border-color: #e5e7eb;
            --sidebar-width: 300px;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 10px;
            color: var(--text-dark);
        }

        /* Sidebar Styling */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--bg-white);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .sidebar-search {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .sidebar-search input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.9rem;
            transition: border-color 0.2s;
        }

        .sidebar-search input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .subject-item {
            margin-bottom: 8px;
            border-radius: 6px;
            overflow: hidden;
            background-color: var(--bg-light);
            transition: all 0.2s;
        }

        .subject-item:hover {
            background-color: var(--primary-color);
        }

        .subject-item.active {
            background-color: var(--primary-color);
        }

        .subject-item > button {
            width: 100%;
            padding: 12px 15px;
            border: none;
            background: none;
            text-align: left;
            cursor: pointer;
            color: var(--text-dark);
            font-weight: 500;
            transition: color 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .subject-item.active > button,
        .subject-item:hover > button {
            color: white;
        }

        .subject-item-toggle {
            font-size: 0.8rem;
            transition: transform 0.2s;
        }

        .subject-item.expanded .subject-item-toggle {
            transform: rotate(90deg);
        }

        .subject-files {
            display: none;
            background-color: var(--bg-white);
            border-top: 1px solid var(--border-color);
        }

        .subject-item.expanded .subject-files {
            display: block;
        }

        .file-item {
            padding: 8px 15px 8px 35px;
            cursor: pointer;
            font-size: 0.85rem;
            color: var(--text-light);
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }

        .file-item:hover {
            background-color: var(--bg-light);
            color: var(--primary-color);
            border-left-color: var(--primary-color);
        }

        .file-item.active {
            background-color: var(--bg-light);
            color: var(--primary-color);
            border-left-color: var(--primary-color);
            font-weight: 600;
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background-color: var(--bg-white);
            border-bottom: 1px solid var(--border-color);
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            flex-wrap: wrap;
            gap: 10px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .breadcrumb {
            display: flex;
            gap: 8px;
            align-items: center;
            font-size: 0.9rem;
            color: var(--text-light);
            flex-wrap: wrap;
        }

        .breadcrumb span {
            color: var(--text-dark);
        }

        .breadcrumb-separator {
            color: var(--border-color);
        }

        .header-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-toggle {
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--bg-white);
            color: var(--text-dark);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .dropdown-toggle:hover {
            background-color: var(--bg-light);
            border-color: var(--primary-color);
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            background-color: var(--bg-white);
            min-width: 250px;
            box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
            z-index: 1000;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            max-height: 400px;
            overflow-y: auto;
            top: 100%;
            left: 0;
        }

        .dropdown.active .dropdown-menu {
            display: block;
        }

        .dropdown-item {
            color: var(--text-dark);
            padding: 12px 20px;
            text-decoration: none;
            display: block;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 1px solid var(--border-color);
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background-color: var(--bg-light);
            color: var(--primary-color);
            padding-left: 24px;
        }

        .dropdown-item.active {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }

        .btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--bg-white);
            color: var(--text-dark);
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
            font-weight: 500;
        }

        .btn:hover {
            background-color: var(--bg-light);
            border-color: var(--primary-color);
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
        }

        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            border: 1px solid var(--border-color);
            background-color: var(--bg-white);
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            background-color: var(--bg-light);
        }

        /* Content Display Area */
        .content-area {
            flex: 1;
            overflow: hidden;
            display: flex;
            gap: 15px;
        }

        .content-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background-color: var(--bg-white);
            border-radius: 8px;
            margin: 15px;
            box-shadow: var(--shadow);
        }

        .content-header {
            padding: 20px 25px;
            border-bottom: 1px solid var(--border-color);
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.05), rgba(15, 23, 42, 0.02));
        }

        .content-header h2 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .content-meta {
            display: flex;
            gap: 15px;
            font-size: 0.85rem;
            color: var(--text-light);
            flex-wrap: wrap;
        }

        .content-meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .content-body {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
        }

        .content-footer {
            padding: 20px 25px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--bg-light);
            flex-wrap: wrap;
            gap: 10px;
        }

        .chapter-nav {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .chapter-nav-button {
            padding: 10px 20px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--bg-white);
            color: var(--text-dark);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .chapter-nav-button:hover:not(:disabled) {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .chapter-nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .chapter-nav-info {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* Markdown Styling */
        .markdown h1 {
            font-size: 2rem;
            margin: 1.5rem 0 1rem;
            color: var(--text-dark);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .markdown h2 {
            font-size: 1.5rem;
            margin: 1.5rem 0 0.8rem;
            color: var(--text-dark);
        }

        .markdown h3 {
            font-size: 1.25rem;
            margin: 1.2rem 0 0.6rem;
            color: var(--text-dark);
        }

        .markdown code {
            background-color: var(--bg-light);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: var(--danger-color);
            font-size: 0.9em;
        }

        .markdown pre {
            background-color: #1f2937;
            color: #f3f4f6;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 1rem 0;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .markdown pre code {
            background-color: transparent;
            color: #f3f4f6;
            padding: 0;
            border-radius: 0;
        }

        .markdown table {
            border-collapse: collapse;
            width: 100%;
            margin: 1rem 0;
        }

        .markdown table th,
        .markdown table td {
            border: 1px solid var(--border-color);
            padding: 10px;
            text-align: left;
        }

        .markdown table th {
            background-color: var(--bg-light);
            font-weight: 600;
        }

        .markdown blockquote {
            border-left: 4px solid var(--primary-color);
            padding-left: 15px;
            margin: 1rem 0;
            color: var(--text-light);
            font-style: italic;
        }

        .markdown ul,
        .markdown ol {
            margin: 1rem 0 1rem 1.5rem;
        }

        .markdown li {
            margin: 0.5rem 0;
        }

        .markdown a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .markdown a:hover {
            text-decoration: underline;
        }

        /* Help Message */
        .help-content {
            max-width: 1000px;
        }

        .help-content h2 {
            margin-top: 1.5rem;
        }

        /* Empty State */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-light);
            text-align: center;
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-state-text {
            font-size: 1.1rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                height: 100%;
                z-index: 999;
                transform: translateX(-100%);
                width: 100%;
                max-width: 300px;
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .mobile-menu-toggle {
                display: block;
            }

            .container.sidebar-open::after {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 998;
            }

            .content-area {
                gap: 10px;
            }

            .content-panel {
                margin: 10px;
            }

            .header {
                flex-direction: column;
                align-items: flex-start;
            }

            .header-left {
                width: 100%;
            }

            .header-controls {
                width: 100%;
            }

            .breadcrumb {
                font-size: 0.8rem;
            }

            .content-body {
                padding: 15px;
                font-size: 0.95rem;
            }

            .content-header {
                padding: 15px;
            }

            .content-header h2 {
                font-size: 1.4rem;
            }

            .content-footer {
                padding: 15px;
                flex-direction: column;
            }

            .chapter-nav {
                width: 100%;
                justify-content: space-between;
            }

            .chapter-nav-button {
                padding: 8px 16px;
                font-size: 0.85rem;
                flex: 1;
                min-width: 100px;
            }

            .dropdown-menu {
                min-width: 200px;
            }

            .markdown h1 {
                font-size: 1.5rem;
            }

            .markdown h2 {
                font-size: 1.25rem;
            }

            .markdown h3 {
                font-size: 1.1rem;
            }

            .markdown code {
                font-size: 0.85em;
            }

            .markdown pre {
                font-size: 0.75rem;
                padding: 10px;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 10px 15px;
            }

            .content-panel {
                margin: 5px;
            }

            .content-body {
                padding: 10px;
                font-size: 0.9rem;
            }

            .content-header h2 {
                font-size: 1.2rem;
            }

            .dropdown-menu {
                min-width: 150px;
            }

            .sidebar-header h1 {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container" id="container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>📚 Learning Hub</h1>
                <p>Study Notes & Materials</p>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebarSearch" placeholder="Search subjects...">
            </div>
            <div class="sidebar-content" id="sidebarContent"></div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header with Dropdowns -->
            <div class="header">
                <div class="header-left">
                    <button class="mobile-menu-toggle" id="mobileMenuToggle">☰</button>
                    <div class="breadcrumb" id="breadcrumb"></div>
                </div>
                <div class="header-controls">
                    <!-- Subject Dropdown -->
                    <div class="dropdown" id="subjectDropdown">
                        <button class="dropdown-toggle" id="subjectToggle">📖 Select Subject</button>
                        <div class="dropdown-menu" id="subjectMenu"></div>
                    </div>

                    <!-- Chapter Dropdown -->
                    <div class="dropdown" id="chapterDropdown">
                        <button class="dropdown-toggle" id="chapterToggle">📄 Select Chapter</button>
                        <div class="dropdown-menu" id="chapterMenu"></div>
                    </div>

                    <!-- Theme Toggle -->
                    <button class="theme-toggle" id="themeToggle">🌙</button>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <div class="content-panel">
                    <div class="content-header" id="contentHeader">
                        <h2 id="contentTitle">Welcome</h2>
                        <div class="content-meta" id="contentMeta"></div>
                    </div>
                    <div class="content-body markdown" id="contentBody"></div>
                    <div class="content-footer" id="contentFooter">
                        <div class="chapter-nav-info" id="chapterInfo"></div>
                        <div class="chapter-nav">
                            <button class="chapter-nav-button" id="prevChapter">← Previous</button>
                            <button class="chapter-nav-button" id="nextChapter">Next →</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Detect base path for GitHub Pages compatibility
        let basePath = '/';
        const currentPath = window.location.pathname;
        if (currentPath.includes('learn-claude')) {
            basePath = currentPath.substring(0, currentPath.indexOf('learn-claude') + 'learn-claude'.length) + '/';
        }

        // State management
        const state = {
            currentSubject: null,
            currentFile: null,
            currentFileIndex: 0,
            currentFolderType: null,
            subjects: {},
            isDarkMode: localStorage.getItem('darkMode') === 'true',
            basePath: basePath
        };

        // Initialize dashboard
        function init() {
            loadSubjects();
            setupEventListeners();
            applyTheme();
            showHelpMessage();
        }

        // Setup subjects data
        function loadSubjects() {
            state.subjects = {
                'React-TypeScript': {
                    name: 'React & TypeScript',
                    path: basePath + 'React-TypeScript',
                    icon: '⚛️',
                    folders: {
                        'notes': {
                            name: 'Notes',
                            icon: '📖',
                            files: [
                                { name: '01-react-fundamentals-with-typescript.md', path: basePath + 'React-TypeScript/notes/01-react-fundamentals-with-typescript.md', size: '~48KB' },
                                { name: '02-advanced-react-patterns.md', path: basePath + 'React-TypeScript/notes/02-advanced-react-patterns.md', size: '~52KB' },
                                { name: '03-state-management-with-react.md', path: basePath + 'React-TypeScript/notes/03-state-management-with-react.md', size: '~50KB' },
                                { name: '04-react-router-and-navigation.md', path: basePath + 'React-TypeScript/notes/04-react-router-and-navigation.md', size: '~45KB' },
                                { name: '05-forms-and-data-handling.md', path: basePath + 'React-TypeScript/notes/05-forms-and-data-handling.md', size: '~48KB' },
                                { name: '06-testing-react-components.md', path: basePath + 'React-TypeScript/notes/06-testing-react-components.md', size: '~52KB' },
                                { name: '07-performance-and-optimization.md', path: basePath + 'React-TypeScript/notes/07-performance-and-optimization.md', size: '~50KB' },
                                { name: '08-advanced-patterns-and-architecture.md', path: basePath + 'React-TypeScript/notes/08-advanced-patterns-and-architecture.md', size: '~56KB' },
                                { name: '09-enterprise-react-architecture.md', path: basePath + 'React-TypeScript/notes/09-enterprise-react-architecture.md', size: '~62KB' }
                            ]
                        },
                        'questions': {
                            name: 'Questions',
                            icon: '❓',
                            files: [
                                { name: '01-conceptual-questions.md', path: basePath + 'React-TypeScript/questions/01-conceptual-questions.md', size: '~35KB' }
                            ]
                        },
                        'interview-questions': {
                            name: 'Interview Prep',
                            icon: '🎤',
                            files: [
                                { name: '01-interview-prep.md', path: basePath + 'React-TypeScript/interview-questions/01-interview-prep.md', size: '~42KB' },
                                { name: '02-expert-architecture-patterns.md', path: basePath + 'React-TypeScript/interview-questions/02-expert-architecture-patterns.md', size: '~48KB' },
                                { name: 'react-architecture-interview-questions.md', path: basePath + 'React-TypeScript/interview-questions/react-architecture-interview-questions.md', size: '~45KB' }
                            ]
                        },
                        'real-problems': {
                            name: 'Coding Challenges',
                            icon: '💻',
                            files: [
                                { name: '01-coding-challenges.md', path: basePath + 'React-TypeScript/real-problems/01-coding-challenges.md', size: '~52KB' },
                                { name: 'react-architecture-coding-challenges.md', path: basePath + 'React-TypeScript/real-problems/react-architecture-coding-challenges.md', size: '~48KB' }
                            ]
                        },
                        'quiz': {
                            name: 'Quiz',
                            icon: '🎯',
                            files: [
                                { name: '01-self-assessment-quiz.md', path: basePath + 'React-TypeScript/quiz/01-self-assessment-quiz.md', size: '~44KB' },
                                { name: 'react-architecture-quiz.md', path: basePath + 'React-TypeScript/quiz/react-architecture-quiz.md', size: '~46KB' }
                            ]
                        }
                    }
                },
                'Java8-Plus': {
                    name: 'Java 8+',
                    path: basePath + 'Java8-Plus',
                    icon: '☕',
                    folders: {
                        'notes': {
                            name: 'Notes',
                            icon: '📖',
                            files: [
                                { name: '01-java8-fundamentals.md', path: basePath + 'Java8-Plus/notes/01-java8-fundamentals.md', size: '~52KB' },
                                { name: '02-streams-api-deep-dive.md', path: basePath + 'Java8-Plus/notes/02-streams-api-deep-dive.md', size: '~58KB' },
                                { name: '03-java9-to-java21-features.md', path: basePath + 'Java8-Plus/notes/03-java9-to-java21-features.md', size: '~65KB' },
                                { name: '04-completable-future.md', path: basePath + 'Java8-Plus/notes/04-completable-future.md', size: '~48KB' },
                                { name: '05-caching-strategies.md', path: basePath + 'Java8-Plus/notes/05-caching-strategies.md', size: '~55KB' },
                                { name: '06-thread-safety.md', path: basePath + 'Java8-Plus/notes/06-thread-safety.md', size: '~50KB' },
                                { name: '07-time-operations.md', path: basePath + 'Java8-Plus/notes/07-time-operations.md', size: '~48KB' },
                                { name: '08-advanced-completable-future-patterns.md', path: basePath + 'Java8-Plus/notes/08-advanced-completable-future-patterns.md', size: '~54KB' },
                                { name: '09-reactive-programming.md', path: basePath + 'Java8-Plus/notes/09-reactive-programming.md', size: '~60KB' },
                                { name: '10-distributed-caching-consistency.md', path: basePath + 'Java8-Plus/notes/10-distributed-caching-consistency.md', size: '~62KB' },
                                { name: '11-cache-performance-tuning.md', path: basePath + 'Java8-Plus/notes/11-cache-performance-tuning.md', size: '~56KB' },
                                { name: '12-advanced-cache-patterns.md', path: basePath + 'Java8-Plus/notes/12-advanced-cache-patterns.md', size: '~58KB' },
                                { name: '13-concurrent-collections-performance.md', path: basePath + 'Java8-Plus/notes/13-concurrent-collections-performance.md', size: '~52KB' },
                                { name: '14-time-operations-at-scale.md', path: basePath + 'Java8-Plus/notes/14-time-operations-at-scale.md', size: '~55KB' },
                                { name: '15-monitoring-observability-debugging.md', path: basePath + 'Java8-Plus/notes/15-monitoring-observability-debugging.md', size: '~60KB' },
                                { name: '16-design-patterns-in-java8-plus.md', path: basePath + 'Java8-Plus/notes/16-design-patterns-in-java8-plus.md', size: '~58KB' }
                            ]
                        },
                        'questions': {
                            name: 'Questions',
                            icon: '❓',
                            files: [
                                { name: 'java8-questions.md', path: basePath + 'Java8-Plus/questions/java8-questions.md', size: '~40KB' }
                            ]
                        },
                        'interview-questions': {
                            name: 'Interview Prep',
                            icon: '🎤',
                            files: [
                                { name: 'java8-interviews.md', path: basePath + 'Java8-Plus/interview-questions/java8-interviews.md', size: '~46KB' },
                                { name: 'expert-architect-questions.md', path: basePath + 'Java8-Plus/interview-questions/expert-architect-questions.md', size: '~52KB' },
                                { name: 'design-patterns-interview-questions.md', path: basePath + 'Java8-Plus/interview-questions/design-patterns-interview-questions.md', size: '~48KB' }
                            ]
                        },
                        'real-problems': {
                            name: 'Coding Challenges',
                            icon: '💻',
                            files: [
                                { name: 'coding-problems.md', path: basePath + 'Java8-Plus/real-problems/coding-problems.md', size: '~60KB' },
                                { name: 'design-patterns-coding-challenges.md', path: basePath + 'Java8-Plus/real-problems/design-patterns-coding-challenges.md', size: '~52KB' }
                            ]
                        },
                        'quiz': {
                            name: 'Quiz',
                            icon: '🎯',
                            files: [
                                { name: 'java8-quiz.md', path: basePath + 'Java8-Plus/quiz/java8-quiz.md', size: '~52KB' },
                                { name: 'design-patterns-quiz.md', path: basePath + 'Java8-Plus/quiz/design-patterns-quiz.md', size: '~48KB' }
                            ]
                        }
                    }
                },
                'Spring-Framework': {
                    name: 'Spring Framework',
                    path: basePath + 'Spring-Framework',
                    icon: '🍃',
                    folders: {
                        'notes': {
                            name: 'Notes',
                            icon: '📖',
                            files: [
                                { name: '01-fundamentals-and-core-concepts.md', path: basePath + 'Spring-Framework/notes/01-fundamentals-and-core-concepts.md', size: '~52KB' },
                                { name: '02-dependency-injection-and-ioc-container.md', path: basePath + 'Spring-Framework/notes/02-dependency-injection-and-ioc-container.md', size: '~56KB' },
                                { name: '03-spring-web-mvc.md', path: basePath + 'Spring-Framework/notes/03-spring-web-mvc.md', size: '~54KB' },
                                { name: '04-spring-boot-essentials.md', path: basePath + 'Spring-Framework/notes/04-spring-boot-essentials.md', size: '~50KB' },
                                { name: '05-data-access-and-jpa.md', path: basePath + 'Spring-Framework/notes/05-data-access-and-jpa.md', size: '~58KB' },
                                { name: '06-rest-apis-and-web-services.md', path: basePath + 'Spring-Framework/notes/06-rest-apis-and-web-services.md', size: '~52KB' },
                                { name: '07-security-and-authentication.md', path: basePath + 'Spring-Framework/notes/07-security-and-authentication.md', size: '~60KB' },
                                { name: '08-transactions-and-persistence-patterns.md', path: basePath + 'Spring-Framework/notes/08-transactions-and-persistence-patterns.md', size: '~56KB' },
                                { name: '09-aop-and-cross-cutting-concerns.md', path: basePath + 'Spring-Framework/notes/09-aop-and-cross-cutting-concerns.md', size: '~48KB' },
                                { name: '10-testing-and-quality-assurance.md', path: basePath + 'Spring-Framework/notes/10-testing-and-quality-assurance.md', size: '~54KB' },
                                { name: '11-performance-and-optimization.md', path: basePath + 'Spring-Framework/notes/11-performance-and-optimization.md', size: '~55KB' },
                                { name: '12-cloud-and-microservices-integration.md', path: basePath + 'Spring-Framework/notes/12-cloud-and-microservices-integration.md', size: '~62KB' },
                                { name: '13-enterprise-architecture-patterns.md', path: basePath + 'Spring-Framework/notes/13-enterprise-architecture-patterns.md', size: '~60KB' }
                            ]
                        },
                        'questions': {
                            name: 'Questions',
                            icon: '❓',
                            files: [
                                { name: 'conceptual-questions.md', path: basePath + 'Spring-Framework/questions/conceptual-questions.md', size: '~42KB' }
                            ]
                        },
                        'interview-questions': {
                            name: 'Interview Prep',
                            icon: '🎤',
                            files: [
                                { name: 'interview-prep.md', path: basePath + 'Spring-Framework/interview-questions/interview-prep.md', size: '~48KB' },
                                { name: 'expert-architecture-questions.md', path: basePath + 'Spring-Framework/interview-questions/expert-architecture-questions.md', size: '~54KB' },
                                { name: 'spring-architecture-interview-questions.md', path: basePath + 'Spring-Framework/interview-questions/spring-architecture-interview-questions.md', size: '~50KB' }
                            ]
                        },
                        'real-problems': {
                            name: 'Coding Challenges',
                            icon: '💻',
                            files: [
                                { name: 'coding-challenges.md', path: basePath + 'Spring-Framework/real-problems/coding-challenges.md', size: '~56KB' },
                                { name: 'spring-architecture-coding-challenges.md', path: basePath + 'Spring-Framework/real-problems/spring-architecture-coding-challenges.md', size: '~58KB' }
                            ]
                        },
                        'quiz': {
                            name: 'Quiz',
                            icon: '🎯',
                            files: [
                                { name: 'spring-framework-quiz.md', path: basePath + 'Spring-Framework/quiz/spring-framework-quiz.md', size: '~48KB' },
                                { name: 'spring-architecture-quiz.md', path: basePath + 'Spring-Framework/quiz/spring-architecture-quiz.md', size: '~50KB' }
                            ]
                        }
                    }
                },
                'Oracle-SQL': {
                    name: 'Oracle SQL',
                    path: basePath + 'Oracle-SQL',
                    icon: '🗄️',
                    folders: {
                        'notes': {
                            name: 'Notes',
                            icon: '📖',
                            files: [
                                { name: '01-sql-fundamentals-and-dml.md', path: basePath + 'Oracle-SQL/notes/01-sql-fundamentals-and-dml.md', size: '~56KB' },
                                { name: '02-advanced-queries-and-subqueries.md', path: basePath + 'Oracle-SQL/notes/02-advanced-queries-and-subqueries.md', size: '~62KB' },
                                { name: '03-window-functions-and-analytics.md', path: basePath + 'Oracle-SQL/notes/03-window-functions-and-analytics.md', size: '~60KB' },
                                { name: '04-optimization-and-execution-plans.md', path: basePath + 'Oracle-SQL/notes/04-optimization-and-execution-plans.md', size: '~64KB' },
                                { name: '05-plsql-and-advanced-features.md', path: basePath + 'Oracle-SQL/notes/05-plsql-and-advanced-features.md', size: '~72KB' }
                            ]
                        },
                        'questions': {
                            name: 'Questions',
                            icon: '❓',
                            files: [
                                { name: 'oracle-sql-conceptual-questions.md', path: basePath + 'Oracle-SQL/questions/oracle-sql-conceptual-questions.md', size: '~32KB' }
                            ]
                        },
                        'quiz': {
                            name: 'Quiz',
                            icon: '🎯',
                            files: [
                                { name: 'oracle-sql-quiz.md', path: basePath + 'Oracle-SQL/quiz/oracle-sql-quiz.md', size: '~48KB' }
                            ]
                        },
                        'real-problems': {
                            name: 'Coding Challenges',
                            icon: '💻',
                            files: [
                                { name: 'oracle-sql-coding-challenges.md', path: basePath + 'Oracle-SQL/real-problems/oracle-sql-coding-challenges.md', size: '~54KB' }
                            ]
                        },
                        'interview-questions': {
                            name: 'Interview Prep',
                            icon: '🎤',
                            files: [
                                { name: 'oracle-sql-interview-questions.md', path: basePath + 'Oracle-SQL/interview-questions/oracle-sql-interview-questions.md', size: '~50KB' }
                            ]
                        }
                    }
                }
            };

            renderSidebar();
            renderSubjectDropdown();
        }

        // Render sidebar
        function renderSidebar() {
            const sidebar = document.getElementById('sidebarContent');
            sidebar.innerHTML = '';

            Object.entries(state.subjects).forEach(([key, subject]) => {
                const subjectEl = document.createElement('div');
                subjectEl.className = 'subject-item';
                subjectEl.innerHTML = `
                    <button class="subject-button" data-subject="${key}">
                        <span>${subject.icon} ${subject.name}</span>
                        <span class="subject-item-toggle">›</span>
                    </button>
                    <div class="subject-files">
                        ${Object.entries(subject.folders).map(([folderKey, folder]) => `
                            <div style="padding: 10px 15px; font-weight: 500; color: var(--text-light); font-size: 0.8rem; border-top: 1px solid var(--border-color);">
                                ${folder.icon} ${folder.name}
                            </div>
                            ${folder.files.map(file => `
                                <div class="file-item" data-path="${file.path}" data-subject="${key}" data-folder="${folderKey}">
                                    ${file.name}
                                </div>
                            `).join('')}
                        `).join('')}
                    </div>
                `;

                const button = subjectEl.querySelector('.subject-button');
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    subjectEl.classList.toggle('expanded');
                });

                const fileItems = subjectEl.querySelectorAll('.file-item');
                fileItems.forEach(item => {
                    item.addEventListener('click', () => {
                        loadFile(item.dataset.path, item.dataset.subject, item.dataset.folder);
                        updateActiveFile(item);
                        closeSidebarMobile();
                    });
                });

                sidebar.appendChild(subjectEl);
            });
        }

        // Render subject dropdown
        function renderSubjectDropdown() {
            const menu = document.getElementById('subjectMenu');
            menu.innerHTML = '';

            Object.entries(state.subjects).forEach(([key, subject]) => {
                const item = document.createElement('div');
                item.className = 'dropdown-item';
                item.textContent = `${subject.icon} ${subject.name}`;
                item.addEventListener('click', () => {
                    selectSubject(key, subject);
                });
                menu.appendChild(item);
            });
        }

        // Select subject
        function selectSubject(key, subject) {
            state.currentSubject = key;
            document.getElementById('subjectToggle').textContent = `${subject.icon} ${subject.name}`;
            closeDropdown('subjectDropdown');
            renderChapterDropdown(subject);
            updateBreadcrumb();
        }

        // Render chapter dropdown
        function renderChapterDropdown(subject) {
            const menu = document.getElementById('chapterMenu');
            menu.innerHTML = '';

            let totalFiles = 0;
            const allFiles = [];

            Object.entries(subject.folders).forEach(([folderKey, folder]) => {
                const headerDiv = document.createElement('div');
                headerDiv.style.cssText = 'padding: 10px 20px; font-weight: 600; background-color: var(--bg-light); font-size: 0.85rem;';
                headerDiv.textContent = `${folder.icon} ${folder.name}`;
                menu.appendChild(headerDiv);

                folder.files.forEach(file => {
                    const item = document.createElement('div');
                    item.className = 'dropdown-item';
                    item.textContent = file.name;
                    item.addEventListener('click', () => {
                        loadFile(file.path, state.currentSubject, folderKey);
                        document.getElementById('chapterToggle').textContent = `📄 ${file.name}`;
                        closeDropdown('chapterDropdown');
                    });
                    menu.appendChild(item);
                    allFiles.push({ path: file.path, name: file.name, folder: folderKey });
                });
            });

            state.chapters = allFiles;
        }

        // Load file content
        function loadFile(path, subject, folderType) {
            state.currentFile = path;
            state.currentSubject = subject;
            state.currentFolderType = folderType;

            // Setup chapters array if not already done
            if (!state.chapters || !Array.isArray(state.chapters) || state.chapters.length === 0) {
                const subjectData = state.subjects[subject];
                if (subjectData) {
                    const allFiles = [];
                    Object.entries(subjectData.folders).forEach(([folderKey, folder]) => {
                        folder.files.forEach(file => {
                            allFiles.push({ path: file.path, name: file.name, folder: folderKey });
                        });
                    });
                    state.chapters = allFiles;
                }
            }

            // Find current file index in chapters array
            if (state.chapters) {
                state.currentFileIndex = state.chapters.findIndex(ch => ch.path === path);
            }

            fetch(path)
                .then(response => {
                    if (!response.ok) throw new Error('File not found');
                    return response.text();
                })
                .then(content => {
                    const title = path.split('/').pop().replace('.md', '').replace(/-/g, ' ');
                    document.getElementById('contentTitle').textContent = title;

                    const html = DOMPurify.sanitize(marked.parse(content));
                    document.getElementById('contentBody').innerHTML = html;

                    updateBreadcrumb();
                    updateChapterNavigation();
                    closeSidebarMobile();
                })
                .catch(error => {
                    document.getElementById('contentBody').innerHTML = `<p>Error loading file: ${error.message}</p>`;
                });
        }

        // Update chapter navigation
        function updateChapterNavigation() {
            const prevBtn = document.getElementById('prevChapter');
            const nextBtn = document.getElementById('nextChapter');
            const info = document.getElementById('chapterInfo');

            if (!state.chapters || state.chapters.length === 0) {
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                info.textContent = '';
                return;
            }

            const total = state.chapters.length;
            const current = state.currentFileIndex + 1;

            info.textContent = `Chapter ${current} of ${total}`;

            prevBtn.disabled = state.currentFileIndex <= 0;
            nextBtn.disabled = state.currentFileIndex >= total - 1;

            prevBtn.onclick = () => {
                if (state.currentFileIndex > 0) {
                    const prevFile = state.chapters[state.currentFileIndex - 1];
                    loadFile(prevFile.path, state.currentSubject, prevFile.folder);
                }
            };

            nextBtn.onclick = () => {
                if (state.currentFileIndex < total - 1) {
                    const nextFile = state.chapters[state.currentFileIndex + 1];
                    loadFile(nextFile.path, state.currentSubject, nextFile.folder);
                }
            };
        }

        // Update active file in sidebar
        function updateActiveFile(element) {
            document.querySelectorAll('.file-item.active').forEach(el => {
                el.classList.remove('active');
            });
            element.classList.add('active');
        }

        // Update breadcrumb
        function updateBreadcrumb() {
            const breadcrumb = document.getElementById('breadcrumb');
            breadcrumb.innerHTML = '';

            if (state.currentSubject && state.subjects[state.currentSubject]) {
                const subject = state.subjects[state.currentSubject];
                const span = document.createElement('span');
                span.textContent = subject.name;
                breadcrumb.appendChild(span);

                if (state.currentFile) {
                    const sep = document.createElement('span');
                    sep.className = 'breadcrumb-separator';
                    sep.textContent = '/';
                    breadcrumb.appendChild(sep);

                    const fileName = state.currentFile.split('/').pop().replace('.md', '');
                    const span2 = document.createElement('span');
                    span2.textContent = fileName;
                    breadcrumb.appendChild(span2);
                }
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Dropdown toggles
            document.getElementById('subjectToggle').addEventListener('click', (e) => {
                e.stopPropagation();
                toggleDropdown('subjectDropdown');
            });

            document.getElementById('chapterToggle').addEventListener('click', (e) => {
                e.stopPropagation();
                toggleDropdown('chapterDropdown');
            });

            // Close dropdowns on outside click
            document.addEventListener('click', () => {
                closeAllDropdowns();
            });

            // Mobile menu toggle
            document.getElementById('mobileMenuToggle').addEventListener('click', () => {
                document.getElementById('sidebar').classList.toggle('mobile-open');
                document.getElementById('container').classList.toggle('sidebar-open');
            });

            // Theme toggle
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);

            // Search
            document.getElementById('sidebarSearch').addEventListener('input', (e) => {
                filterSubjects(e.target.value);
            });
        }

        // Dropdown functions
        function toggleDropdown(dropdownId) {
            document.getElementById(dropdownId).classList.toggle('active');
        }

        function closeDropdown(dropdownId) {
            document.getElementById(dropdownId).classList.remove('active');
        }

        function closeAllDropdowns() {
            document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('active'));
        }

        function closeSidebarMobile() {
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('mobile-open');
                document.getElementById('container').classList.remove('sidebar-open');
            }
        }

        // Filter subjects
        function filterSubjects(query) {
            const items = document.querySelectorAll('.subject-item');
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(query.toLowerCase()) ? '' : 'none';
            });
        }

        // Theme toggle
        function toggleTheme() {
            state.isDarkMode = !state.isDarkMode;
            localStorage.setItem('darkMode', state.isDarkMode);
            applyTheme();
        }

        function applyTheme() {
            if (state.isDarkMode) {
                document.documentElement.style.setProperty('--bg-light', '#1f2937');
                document.documentElement.style.setProperty('--bg-white', '#111827');
                document.documentElement.style.setProperty('--text-dark', '#f3f4f6');
                document.documentElement.style.setProperty('--text-light', '#d1d5db');
                document.documentElement.style.setProperty('--border-color', '#374151');
                document.getElementById('themeToggle').textContent = '☀️';
            } else {
                document.documentElement.style.setProperty('--bg-light', '#f9fafb');
                document.documentElement.style.setProperty('--bg-white', '#ffffff');
                document.documentElement.style.setProperty('--text-dark', '#1f2937');
                document.documentElement.style.setProperty('--text-light', '#6b7280');
                document.documentElement.style.setProperty('--border-color', '#e5e7eb');
                document.getElementById('themeToggle').textContent = '🌙';
            }
        }

        // Show help message
        function showHelpMessage() {
            const helpContent = `
                <div class="help-content">
                    <h2>Welcome to Learning Hub 📚</h2>
                    <p>This is a comprehensive learning platform for managing your study materials.</p>

                    <h2>Getting Started:</h2>
                    <ol>
                        <li><strong>Select Subject:</strong> Use the Subject dropdown to choose a topic</li>
                        <li><strong>Select Chapter:</strong> Use the Chapter dropdown to pick a specific chapter or material</li>
                        <li><strong>Read Content:</strong> View the content in the main area</li>
                        <li><strong>Navigate:</strong> Use Previous/Next buttons at the bottom to move between chapters</li>
                    </ol>

                    <h2>Features:</h2>
                    <ul>
                        <li>📖 Full markdown rendering with syntax highlighting</li>
                        <li>🌙 Dark mode toggle for comfortable reading</li>
                        <li>📱 Mobile-friendly responsive design with dropdown navigation</li>
                        <li>🔍 Search across subjects in the sidebar</li>
                        <li>⌨️ Quick chapter navigation with Previous/Next buttons</li>
                        <li>📋 Breadcrumb navigation showing your location</li>
                    </ul>

                    <h2>Navigation Options:</h2>
                    <ul>
                        <li><strong>Desktop:</strong> Use sidebar for full navigation tree</li>
                        <li><strong>Mobile:</strong> Use dropdown menus in header for quick selection</li>
                        <li><strong>Chapter Navigation:</strong> Use Previous/Next buttons at bottom of each page</li>
                    </ul>

                    <h2>Tips:</h2>
                    <ul>
                        <li>Toggle the menu icon (☰) on mobile to open/close the sidebar</li>
                        <li>Toggle dark mode with the 🌙/☀️ button for comfortable studying</li>
                        <li>Use search in the sidebar to quickly find subjects</li>
                        <li>Chapter navigation helps you progress through materials sequentially</li>
                    </ul>

                    <h2>Study Subjects:</h2>
                    <ul>
                        <li><strong>⚛️ React & TypeScript</strong> - Modern frontend development</li>
                        <li><strong>☕ Java 8+</strong> - Advanced Java programming</li>
                        <li><strong>🍃 Spring Framework</strong> - Enterprise Java framework</li>
                        <li><strong>🗄️ Oracle SQL</strong> - Database and SQL expertise</li>
                    </ul>
                </div>
            `;

            document.getElementById('contentBody').innerHTML = helpContent;
            document.getElementById('contentTitle').textContent = 'Welcome to Learning Hub';
        }

        // Initialize on page load
        window.addEventListener('load', init);
    </script>
</body>
</html>
